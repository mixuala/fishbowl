<ion-grid class="center-grid" tappable 
(click)="dismiss($event, this)"
>
  <ion-row class="ion-justify-content-center ion-align-items-center">
    <ion-col size="12" size-sm="7" size-xl="5">
    <ng-container [ngSwitch]="template">

      <ion-card class="content" padding *ngSwitchCase="'intro'">
        <ion-item color="tertiary">
          <!-- <ion-icon slot="start" size="large" src="assets/icon/favicon_package_v0.16/fishbowl.svg"></ion-icon> -->
          <ion-avatar slot="start" size="large" >
            <img src="assets/icon/favicon_package_v0.16/fishbowl.svg">
          </ion-avatar>
          <ion-label class="ion-text-wrap ion-text-bottom">
            <h1>
              Welcome to Fishbowl
            </h1>
          </ion-label>
        </ion-item>   

        <ion-card-content class="ion-padding-vertical">
          <ion-item lines="none" color="clear">
            <ion-label text-wrap color="light">
              <p>
              This is a <i>side-car</i> app for the parlor game known as "Fishbowl". The app is designed to 
              work together with a video meeting site, like <b>Zoom</b> or <b>Google Meet</b>,
              to let you play with your friends while <i>sheltering-in-place</i>.
              </p>
            </ion-label>
          </ion-item>
        </ion-card-content>        
      </ion-card>

      <ion-card class="content interstitial player-round-complete" padding *ngSwitchCase="'player-round-complete'">
        <ion-card-header color="tertiary">
          <ion-card-title>
            Player Round Complete
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-padding-vertical">

          <div class="round-scores">
            <ion-item-divider class="ion-margin-top">
              <ion-note>player round summary</ion-note>
            </ion-item-divider>
            <ion-grid class="ion-no-padding" *ngIf="gamePlay">
              <ion-row class="header">
                <ion-col>
                  <ion-item class="spotlight-player">
                    <ion-icon name="person" class="ion-padding-end"></ion-icon>
                    <ion-label>{{gameSummary.spotlightPlayer.playerName}}</ion-label>
                    <ion-badge [color]="gameSummary.spotlightPlayer.teamIndex ? 'success' : 'tertiary'" 
                    class="ion-padding-horizontal">{{gameSummary.spotlightPlayer.teamName}}</ion-badge>
                  </ion-item>
                </ion-col>
              </ion-row>

              <ion-row class="ion-no-padding wide">
                <ion-col size="6" *ngFor="let log of (gamePlay.log | keyvalue)">
                  <ion-item >
                    <ion-icon slot="start" 
                      [name]="log.value.result ? 'checkbox' : 'close-circle'" 
                      [color]="log.value.result ? 'success' : 'danger'"></ion-icon>
                    <ion-label  class="ion-text-wrap">{{log.value.result ? log.value.word : '[PASS]' }}</ion-label>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>


          <div class="game-summary">
            <ion-item-divider class="ion-margin-top">
              <ion-note>game summary</ion-note>
            </ion-item-divider>
            <ion-grid>
              
              <ion-row class="wide">
                <ion-col size=6>
                  <ion-item>
                    <ion-label class="ion-text-wrap">
                      <ion-note>round</ion-note>
                    </ion-label>
                    <ion-badge color="light" class="ion-padding-horizontal">{{gameSummary.roundNo}}</ion-badge>
                  </ion-item>
                </ion-col>
    
                <ion-col size=6>
                  <ion-item class="ion-no-padding">
                    <ion-label class="ion-text-wrap">
                      <ion-note>words remaining</ion-note> 
                    </ion-label>
                    <ion-badge color="light" class="ion-padding-horizontal">{{getRemaining(gamePlay)}}</ion-badge>
                  </ion-item>
                </ion-col>
              </ion-row>

              <ion-row class="scoreboard wide">
                <ion-col size="6" class="even"
                [class.on-the-spot]="gameSummary.game.teamNames[0]==gameSummary.spotlightPlayer.teamName">
                  <ion-note>{{gameSummary.game.teamNames[0]}}</ion-note>
                  <ion-badge class="ion-float-right ion-padding-horizontal ion-margin-horizontal">
                    {{(gameSummary.scoreboard.total[gameSummary.game.teamNames[0]])?.points || 0}} 
                  </ion-badge>
                </ion-col>
                <ion-col size="6" class="odd"
                [class.on-the-spot]="gameSummary.game.teamNames[1]==gameSummary.spotlightPlayer.teamName">
                  <ion-note class="ion-float-right">{{gameSummary.game.teamNames[1]}}</ion-note>
                  <ion-badge class="ion-float-left ion-padding-horizontal ion-margin-horizontal">
                    {{(gameSummary.scoreboard.total[gameSummary.game.teamNames[1]])?.points || 0}}
                  </ion-badge>
                </ion-col>
              </ion-row>

            </ion-grid>
          </div>
        </ion-card-content>
      </ion-card>




      
      <ion-card class="content interstitial game-round-complete" padding *ngSwitchCase="'game-round-complete'">
        <ion-card-header color="tertiary">
          <ion-card-title>
            Round {{gameSummary.roundNo}} Complete
          </ion-card-title>
        </ion-card-header>
        <ion-card-content class="ion-no-padding game-summary">
          <ion-item-divider class="ion-margin-top">
            <ion-label slot="start">
              <ion-note>game summary</ion-note>
            </ion-label>
            <!-- <div slot="end">
              <ion-note>duration</ion-note>
              <ion-badge color="light" class="ion-padding-horizontal">{{gameSummary.duration | date:"mm:ss"}}</ion-badge>
            </div> -->
          </ion-item-divider>

          <ion-grid>
            <ion-row class="header wide">
              <ion-col size="6">
                <ion-item lines="full"
                [color]="winnersByRound['total']==gameSummary.teamNames[0] && 'success'" 
                >
                  <ion-icon name="people-circle-outline" slot="start" class="ion-hide-sm-down"></ion-icon>
                  <ion-label class="ion-text-wrap">
                    {{gameSummary.teamNames[0]}} 
                  </ion-label>
                </ion-item>
              </ion-col>
              <ion-col size="6">
                <ion-item lines="full" class="ion-no-padding"
                [color]="winnersByRound['total']==gameSummary.teamNames[1] && 'success'" >
                  <ion-label class="ion-text-wrap">
                    {{gameSummary.teamNames[1]}}
                  </ion-label>
                  <ion-icon name="people-circle-outline" class="ion-float-right ion-hide-sm-down"></ion-icon>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-row class="wide"
              *ngFor="let kv of (gameSummary.scoreboard | keyvalue); let i=index"
              [className]="kv.key"
            >
              <ion-col size="6"
                [class.on-the-spot]="winnersByRound[kv.key]==gameSummary.teamNames[0]">
                <ion-note>{{kv.key}}</ion-note>
                <ion-badge class="ion-float-right ion-padding-horizontal ion-margin-horizontal">
                  {{(kv.value[gameSummary.teamNames[0]])?.points || 0}} 
                </ion-badge>
              </ion-col>
              <ion-col size="6"
                [class.on-the-spot]="winnersByRound[kv.key]==gameSummary.teamNames[1]"
              >
                <ion-note class="ion-float-right">{{kv.key}}</ion-note>
                <ion-badge class="ion-float-left ion-padding-horizontal ion-margin-horizontal">
                  {{(kv.value[gameSummary.teamNames[1]])?.points || 0}} 
                </ion-badge>
              </ion-col>
            </ion-row>
          </ion-grid>
          
        </ion-card-content>
      </ion-card>



      

      <ion-card class="content pre-game player-welcome" padding *ngSwitchCase="'player-welcome'">
        <ion-item color="tertiary"  class="title">
          <!-- <ion-icon slot="start" size="large" src="assets/icon/favicon_package_v0.16/fishbowl.svg"></ion-icon> -->
          <ion-avatar slot="start" size="large" >
            <img src="assets/icon/favicon_package_v0.16/fishbowl.svg">
          </ion-avatar>
          <ion-label class="ion-text-wrap ion-text-bottom">
            <h1>
              Welcome to Fishbowl
            </h1>
          </ion-label>
        </ion-item>   

        <ion-card-content>

          <h1 class="content-header inline-text-wrap">
            <span>
              <ion-text color="tertiary"><strong> {{gameTitle}} </strong></ion-text>
              is now
            </span> 
            <ion-badge color="success" class="is-live">live</ion-badge>
          </h1>

          <div *ngIf="hasEntry; else doEntry">
            <div class="ion-text-center">
              <div class="hero">
                <ion-note class="ion-text-left" color="tertiary">player</ion-note>
                <p class="player-name"><ion-text color="light">
                  {{playerName}}
                </ion-text></p>
              </div>
            </div>

            <h3>Join the video stream and relax until the game begins...</h3>
            <ion-button expand="block" color="success" class="ion-margin-vertical taller">
              <ion-icon name="videocam" slot="start"></ion-icon>
              <a [href]="chatRoom" title="open video" target="_blank">Open Video Chat Room</a>
            </ion-button>
            <div class="ion-margin-vertical"></div>
          </div>

          <ng-template #doEntry>
            <div class="ion-margin-vertical">
              <h2><ion-text color="tertiary">Game Entry</ion-text></h2>
              <h3><ion-text>
                To join this game, you must put 3 secret words into the fishbowl.
              </ion-text></h3>
            </div>

            <ion-button expand="block" color="tertiary" size="large" class="ion-margin-vertical"
            routerDirection="forward" [routerLink]="entryLink" (click)="dismiss(true)">
              Create Game Entry
            </ion-button>
            <div class="ion-margin-vertical"></div>
          </ng-template>

        </ion-card-content>        
      </ion-card>



      <ion-card class="content pre-game check-in" padding *ngSwitchCase="'check-in'">
        <ion-item color="tertiary" class="title">
          <!-- <ion-icon slot="start" size="large" src="assets/icon/favicon_package_v0.16/fishbowl.svg"></ion-icon> -->
          <ion-avatar slot="start" size="large" >
            <img src="assets/icon/favicon_package_v0.16/fishbowl.svg">
          </ion-avatar>
          <ion-label class="ion-text-wrap ion-text-bottom">
            <h1>
              Welcome to Fishbowl
            </h1>
          </ion-label>
        </ion-item>   

        <ion-card-content>

          <h1>The game is about the begin...</h1>

          <div class="ion-text-center">
            <div class="hero">
              <ion-note class="ion-text-left" color="tertiary">player</ion-note>
              <p class="player-name"><ion-text color="light">
                {{playerName}}
              </ion-text></p>
            </div>
            <div class="ion-text-center ">
              <ion-label>
                <h1><strong>
                  <ion-text color="tertiary">Are you ready?</ion-text>
                </strong></h1>
              </ion-label>
            </div>
            <ion-grid><ion-row>
              <ion-col size="4">
                <ion-button color="warning" expand="block" size="large" (click)="playerReady(false)"> Pass </ion-button>
              </ion-col>
              <ion-col size="8">
                <ion-button color="success" expand="block" size="large" (click)="playerReady('OK')"> OK </ion-button>
              </ion-col>
            </ion-row>
            </ion-grid>
          </div>  


        </ion-card-content>        
      </ion-card>





      <ion-card class="content pre-game team-rosters" padding *ngSwitchCase="'team-rosters'">
        <ion-item color="tertiary" class="title">
          <!-- <ion-icon slot="start" size="large" src="assets/icon/favicon_package_v0.16/fishbowl.svg"></ion-icon> -->
          <ion-avatar slot="start" size="large" >
            <img src="assets/icon/favicon_package_v0.16/fishbowl.svg">
          </ion-avatar>
          <ion-label class="ion-text-wrap ion-text-bottom">
            <h1>
              Welcome to Fishbowl
            </h1>
          </ion-label>
        </ion-item>   

        <ion-card-content>

          <h1><ion-text color="light">
            Here are the teams:
          </ion-text></h1>

          <app-team-roster
            [gameDict$]="gameDict$"
          ></app-team-roster>


        </ion-card-content>        
      </ion-card>






      <ion-card class="content pre-game begin-game-round" padding *ngSwitchCase="'begin-game-round'">
        <ion-item color="tertiary" class="title">
          <ion-avatar slot="start" size="large" >
            <img src="assets/icon/favicon_package_v0.16/fishbowl.svg">
          </ion-avatar>
          <ion-label class="ion-text-wrap ion-text-bottom">
            <h1>
              Round {{round}}
            </h1>
          </ion-label>
        </ion-item>   

        <ion-card-content>
          <h2 class="rules"><ion-text color="medium">Rules for the spotlight:</ion-text></h2>
          <div class="circle-wrap" >
            <ion-text color="ion-color-dark">{{round}}</ion-text>
          </div>

          <ng-container [ngSwitch]="round">
            <p *ngSwitchCase="1" class="text-align-justify">
              Give clues, but 
              <br />
              <ion-text color="success">don't say</ion-text> any part of  
              <br /><ion-text color="success bigger">the secret word</ion-text>.
            </p>
            <p *ngSwitchCase="2"  class="text-align-center">
              Your clue can only be
              <br />
              <ion-text color="success bigger">one</ion-text> word!
            </p>
            <p *ngSwitchCase="3" class="text-align-center">
              Say nothing &mdash; just 
              <br />
              <ion-text color="success bigger">act it out!</ion-text>
            </p>

          </ng-container>

        </ion-card-content>        
      </ion-card>




    </ng-container>
  </ion-col>
  </ion-row>
</ion-grid>